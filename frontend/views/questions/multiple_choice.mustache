<form method="POST" action="/api/responses/{{survey.id}}/{{step.id}}">
  <input type="hidden" name="responseId" value="{{responseId}}">

  {{#step.options}}
    <label>
      <input type="checkbox" name="value" value="{{codeItem}}" data-requires-precision="{{requiresPrecision}}">
      {{label}}
    </label>
    <input type="text" name="precision_{{codeItem}}" class="precision-input" style="display:none;" placeholder="PrÃ©cisez..." />
  {{/step.options}}

  <button type="submit">Suivant</button>
</form>

<script>
  document.querySelectorAll('input[type=checkbox][name=value]').forEach(cb => {
    cb.addEventListener('change', function() {
      const input = document.querySelector(`input[name=precision_${this.value}]`);
      input.style.display = this.checked && this.dataset.requiresPrecision === 'true' ? 'inline-block' : 'none';
    });
  });
</script>
