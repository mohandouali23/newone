
{{#options}}
  <label>
    <input type="radio" name="{{id}}" value="{{codeItem}}" 
           data-requires-precision="{{requiresPrecision}}"
            data-precision-key="{{precisionKey}}"
           {{#isSelected}}checked{{/isSelected}}>
    {{label}}
  </label><br>
  {{#hasSubQuestions}}
<div class="sub-questions" data-parent="{{codeItem}}" 
style="{{^showSubQuestions}}display:none;{{/showSubQuestions}}">
  
  {{#subQuestions}}
    {{> partials/accQuestion}}
  {{/subQuestions}}
</div>
{{/hasSubQuestions}}

    {{#requiresPrecision}}
    {{> partials/precision }}
  {{/requiresPrecision}}

{{/options}}


<script>
document.addEventListener('DOMContentLoaded', function() {
  const questionId = "{{id}}"; // Mustache va remplacer
  document.querySelectorAll(`input[type=radio][name="${questionId}"]`).forEach(radio => {
    radio.addEventListener('change', function() {
    
      // gÃ©rer sous-questions si besoin
      document.querySelectorAll(`.sub-questions`).forEach(block => block.style.display='none');
      const subBlock = document.querySelector(`.sub-questions[data-parent="${this.value}"]`);
      if(subBlock) subBlock.style.display = 'block';
    });
  });
});
</script>


